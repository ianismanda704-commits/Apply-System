<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A.P.P.L.Y. â€” Information into Action</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Inconsolata:wght@300;400;500;600&family=Libre+Baskerville:ital@1&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --cream: #f5f0e8; --paper: #faf7f2;
      --ink: #1a1510; --ink2: #3a3228; --ink3: #6b5f52;
      --ink4: #a89880; --ink5: #d4c8b8;
      --amber: #c8820a; --amber2: #e8a020;
      --red: #b84040; --green: #3a7a50; --blue: #3060a8;
      --serif: 'Playfair Display', Georgia, serif;
      --mono: 'Inconsolata', monospace;
      --italic: 'Libre Baskerville', serif;
    }
    html { scroll-behavior: smooth; }
    body { background: var(--cream); color: var(--ink); font-family: var(--mono); }
    @keyframes pulse {
      0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
    input[type=range] { height: 4px; cursor: pointer; width: 100%; }
    textarea { font-family: var(--mono) !important; font-size: 0.95rem !important; line-height: 1.7; }
    button { transition: opacity 0.15s; font-family: var(--mono); }
    button:hover:not(:disabled) { opacity: 0.82; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--cream); }
    ::-webkit-scrollbar-thumb { background: var(--ink5); }
    @media (max-width: 768px) {
      .three-col { grid-template-columns: 1fr !important; }
      .two-col-280 { grid-template-columns: 1fr !important; }
      .two-col-180 { grid-template-columns: 1fr !important; }
      .side-border-r { border-right: none !important; border-bottom: 1px solid var(--ink5) !important; }
      .pad-outer { padding-left: 20px !important; padding-right: 20px !important; }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;

    // â”€â”€â”€ GROK CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const GROK_API_KEY = "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"; // â† paste your xAI key here
    const GROK_MODEL   = "grok-3";                 // or "grok-3-mini", "grok-beta", etc.
    const GROK_URL     = "https://api.x.ai/v1/chat/completions";

    // This prefix is prepended to every system prompt so Grok produces
    // clean JSON output formatted the same way the Claude API would.
    const CLAUDE_STYLE_PREFIX = `You are a precise, concise assistant.
CRITICAL OUTPUT RULES â€” the downstream parser depends on these:
- Return ONLY a valid JSON object. No markdown fences, no backticks, no preamble, no "Here is..." intro.
- Do not add any text before or after the JSON object.
- Do not explain your reasoning.
- Match the exact key names specified in the schema.
- Keep values tight and human â€” avoid corporate filler phrases.
`;

    // Unified Grok fetch helper (OpenAI-compatible format)
    async function callGrok({ system = "", user, maxTokens = 1000 }) {
      const messages = [
        { role: "system", content: CLAUDE_STYLE_PREFIX + (system ? "\n" + system : "") },
        { role: "user",   content: user },
      ];

      const res = await fetch(GROK_URL, {
        method: "POST",
        headers: {
          "Content-Type":  "application/json",
          "Authorization": `Bearer ${GROK_API_KEY}`,
        },
        body: JSON.stringify({
          model:      GROK_MODEL,
          max_tokens: maxTokens,
          messages,
        }),
      });

      const data = await res.json();
      // Grok uses OpenAI-compatible shape: choices[0].message.content
      return data.choices?.[0]?.message?.content ?? "";
    }
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    const PRESETS = [
      "Compound interest means your money grows exponentially over time if you invest early.",
      "Exercise reduces anxiety and depression as effectively as medication for many people.",
      "Most people regret the things they didn't do far more than the things they did.",
      "The average person checks their phone 96 times a day, fragmenting attention and reducing deep work capacity.",
      "You become the average of the five people you spend the most time with.",
    ];

    const STEP_COLORS = ["#c8820a","#3060a8","#3a7a50","#8b3a8b","#b84040"];
    const STEP_LABELS = ["ANCHOR","ACTION","PLACE","LOOP","YIELD"];
    const STEP_FULL   = ["A â€” Anchor It","P â€” Pick One Action","P â€” Place It in Reality","L â€” Loop It","Y â€” Yield Check"];
    const STEP_ICONS  = ["âš“","âš¡","ğŸ“","ğŸ”„","âœ…"];

    function Dots() {
      return (
        <div style={{ display:"flex", gap:"6px" }}>
          {[0,1,2].map(i => (
            <div key={i} style={{
              width:"8px", height:"8px", borderRadius:"50%", background:"var(--amber)",
              animation:`pulse 1.2s ${i*0.2}s infinite ease-in-out both`
            }} />
          ))}
        </div>
      );
    }

    function App() {
      const [simInput,       setSimInput]       = useState("");
      const [simScenario,    setSimScenario]     = useState(null);
      const [simLoading,     setSimLoading]      = useState(false);
      const [simError,       setSimError]        = useState("");
      const [actionLevel,    setActionLevel]     = useState(50);
      const [interpretation, setInterpretation]  = useState(50);
      const [timing,         setTiming]          = useState(50);
      const [noteInput,      setNoteInput]       = useState("");
      const [aiResult,       setAiResult]        = useState(null);
      const [loading,        setLoading]         = useState(false);
      const [error,          setError]           = useState("");
      const [copied,         setCopied]          = useState(false);
      const resultRef    = useRef(null);
      const simResultRef = useRef(null);

      /* â”€â”€â”€ SIMULATOR â”€â”€â”€ */
      const generateSimScenario = async (infoText) => {
        if (!infoText.trim()) return;
        setSimLoading(true);
        setSimScenario(null);
        setSimError("");
        setActionLevel(50);
        setInterpretation(50);
        setTiming(50);

        const userPrompt = `Given this piece of information: "${infoText}"

Generate 4 realistic, vivid, narrative outcome stories showing how the SAME information plays out differently. Return ONLY valid JSON, no markdown, no preamble.

{
  "info": "the information exactly as given",
  "noAction": "2-3 sentence story: person knows it but never acts. Passive drift. Second person (You...).",
  "negInterp": "2-3 sentence story: person interprets it negatively â€” evidence of failure or hopelessness.",
  "wrongTime": "2-3 sentence story: true information, wrong life stage or moment â€” unreachable right now.",
  "actPositiveRight": "2-3 sentence story: right mindset, right time, concrete result. Earned, not lucky."
}

Be specific, human, emotionally real. Avoid clichÃ©s.`;

        try {
          const text   = await callGrok({ user: userPrompt, maxTokens: 800 });
          const parsed = JSON.parse(text.replace(/```json|```/g,"").trim());
          setSimScenario(parsed);
          setSimLoading(false);
          setTimeout(() => simResultRef.current?.scrollIntoView({behavior:"smooth",block:"start"}), 120);
        } catch(e) {
          setSimLoading(false);
          setSimError("Couldn't generate scenarios. Try again.");
        }
      };

      const getOutcome = () => {
        if (!simScenario) return null;
        if (actionLevel    < 25) return {text:simScenario.noAction,       label:"No Action Taken",         color:"#a89880",icon:"ğŸ˜´",impact:5};
        if (interpretation < 30) return {text:simScenario.negInterp,      label:"Negative Interpretation", color:"#b84040",icon:"ğŸ˜”",impact:15};
        if (timing         < 30) return {text:simScenario.wrongTime,      label:"Wrong Timing",            color:"#6b5f52",icon:"â°",impact:20};
        if (actionLevel>70 && interpretation>60 && timing>60)
                                  return {text:simScenario.actPositiveRight,label:"Full Activation",        color:"#3a7a50",icon:"ğŸ”¥",impact:95};
        return {
          text:"You act on it partially. Some friction, some progress. The information does something â€” but not everything it could. This is where most people live.",
          label:"Partial Application", color:"#c8820a", icon:"ğŸŒ±",
          impact: Math.round(actionLevel*0.5 + interpretation*0.3 + timing*0.2) / 2
        };
      };

      /* â”€â”€â”€ A.P.P.L.Y. RUNNER â”€â”€â”€ */
      const runApply = async () => {
        if (!noteInput.trim()) return;
        setLoading(true);
        setAiResult(null);
        setError("");

        const systemPrompt = `You are an expert at the A.P.P.L.Y. system. Return ONLY a valid JSON object, no markdown, no preamble.

{
  "anchor":  {"why":"1-2 sentences on why this matters","relevance":"specific life area"},
  "action":  {"behavior":"the single smallest concrete action","not_this":"the tempting but too-big version"},
  "place":   {"formula":"When [X], I will [Y]","context":"why this trigger works"},
  "loop":    {"duration":"7 days","tracking":"1-sentence tracking method","checkboxes":["Did I do it today?","Is it getting easier?","Any adjustments needed?"]},
  "yield":   {"yes_signal":"specific sign it's working","no_signal":"specific sign to adjust","decision":"if yes: promote to habit. if no: [specific adjustment]"},
  "summary": "One punchy sentence capturing the whole plan"
}`;

        try {
          const text   = await callGrok({
            system:    systemPrompt,
            user:      `Run A.P.P.L.Y. on this note:\n\n"${noteInput}"`,
            maxTokens: 1000,
          });
          const parsed = JSON.parse(text.replace(/```json|```/g,"").trim());
          setLoading(false);
          setAiResult(parsed);
          setTimeout(() => resultRef.current?.scrollIntoView({behavior:"smooth",block:"start"}), 120);
        } catch(e) {
          setLoading(false);
          setError("Something went wrong. Please try again.");
        }
      };

      const copyPlan = () => {
        if (!aiResult) return;
        const t = [
          "A.P.P.L.Y. PLAN",
          `SUMMARY: ${aiResult.summary}`,
          `ANCHOR: ${aiResult.anchor.why}`,
          `ONE ACTION: ${aiResult.action.behavior}`,
          `NOT THIS: ${aiResult.action.not_this}`,
          `TRIGGER: ${aiResult.place.formula}`,
          `TRACKING: ${aiResult.loop.tracking}`,
          `YES IF: ${aiResult.yield.yes_signal}`,
          `NO IF: ${aiResult.yield.no_signal}`,
          `DECISION: ${aiResult.yield.decision}`,
        ].join("\n\n");
        navigator.clipboard.writeText(t);
        setCopied(true);
        setTimeout(() => setCopied(false), 2200);
      };

      const outcome     = getOutcome();
      const impactWidth = outcome?.impact ?? 0;
      const m = { fontFamily:"var(--mono)" };
      const s = { fontFamily:"var(--serif)" };

      return (
        <div style={{minHeight:"100vh",background:"var(--cream)"}}>

          {/* â•â• HERO â•â• */}
          <div style={{background:"var(--paper)",borderBottom:"2px solid var(--ink5)",position:"relative",overflow:"hidden"}}>
            {[...Array(22)].map((_,i) => (
              <div key={i} style={{position:"absolute",left:0,right:0,top:`${56+i*36}px`,height:"1px",background:"rgba(200,180,160,0.35)",pointerEvents:"none"}} />
            ))}
            <div style={{position:"absolute",top:0,bottom:0,left:"72px",width:"2px",background:"rgba(184,64,64,0.22)",pointerEvents:"none"}} />
            <div className="pad-outer" style={{padding:"64px 80px 72px",position:"relative"}}>
              <div style={{...m,fontSize:"0.65rem",letterSpacing:"0.25em",color:"var(--amber)",textTransform:"uppercase",marginBottom:"20px"}}>A Universal Method</div>
              <h1 style={{...s,fontSize:"clamp(52px,9vw,110px)",lineHeight:0.93,color:"var(--ink)",marginBottom:"24px",fontWeight:900}}>
                Information<br/><em style={{color:"var(--amber)"}}>into</em><br/>Action
              </h1>
              <p style={{fontFamily:"var(--italic)",fontStyle:"italic",fontSize:"1.15rem",color:"var(--ink3)",maxWidth:"520px",lineHeight:1.7}}>
                The same note can be useless, moderately helpful, or absolutely life-changing â€”
                depending on three things. Then the A.P.P.L.Y. system makes sure it's the last one.
              </p>
            </div>
          </div>

          {/* â•â• PART 1 â€” SIMULATOR â•â• */}
          <div className="pad-outer" style={{padding:"80px 80px 0",maxWidth:"1100px",margin:"0 auto"}}>

            <div style={{display:"flex",alignItems:"baseline",gap:"16px",marginBottom:"8px"}}>
              <span style={{...m,fontSize:"0.6rem",letterSpacing:"0.25em",color:"var(--amber)",textTransform:"uppercase"}}>Part One</span>
              <div style={{flex:1,height:"1px",background:"var(--ink5)"}} />
            </div>
            <h2 style={{...s,fontSize:"clamp(32px,5vw,56px)",fontWeight:700,lineHeight:0.95,color:"var(--ink)",marginBottom:"12px"}}>
              The Information<br/>Impact Simulator
            </h2>
            <p style={{...m,color:"var(--ink3)",fontSize:"0.85rem",marginBottom:"48px",lineHeight:1.7,maxWidth:"560px"}}>
              Enter any piece of information â€” a quote, insight, study, advice. The AI generates four realistic outcomes showing how the same fact plays out differently. Then move the sliders to see which version of you shows up.
            </p>

            {/* Input box */}
            <div style={{background:"var(--paper)",border:"2px solid var(--ink)",marginBottom:"32px"}}>
              <div style={{padding:"14px 24px",borderBottom:"1px solid var(--ink5)",display:"flex",alignItems:"center",gap:"10px"}}>
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--red)"}} />
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--amber2)"}} />
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--green)"}} />
                <span style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase",marginLeft:"8px"}}>Enter Any Information</span>
              </div>
              <div style={{padding:"20px 24px 12px"}}>
                <textarea
                  value={simInput}
                  onChange={e => setSimInput(e.target.value)}
                  onKeyDown={e => { if(e.key==="Enter"&&(e.metaKey||e.ctrlKey)) generateSimScenario(simInput); }}
                  placeholder={"Type or paste any insight, fact, advice, or principle...\n\ne.g. \"Sleep deprivation impairs judgment as severely as being drunk.\"\nor \"Most startups fail because they build something nobody wants.\""}
                  style={{width:"100%",minHeight:"100px",background:"transparent",border:"none",outline:"none",resize:"vertical",color:"var(--ink)"}}
                />
              </div>
              <div style={{padding:"0 24px 16px",display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center"}}>
                <span style={{...m,fontSize:"0.6rem",color:"var(--ink4)",letterSpacing:"0.1em",textTransform:"uppercase",marginRight:"4px"}}>Try:</span>
                {PRESETS.map((p,i) => (
                  <button key={i} onClick={() => setSimInput(p)} style={{
                    padding:"5px 12px",fontSize:"0.65rem",
                    background: simInput===p ? "var(--ink)" : "transparent",
                    color: simInput===p ? "var(--cream)" : "var(--ink3)",
                    border:"1px solid var(--ink5)",cursor:"pointer"
                  }}>
                    {p.length>40 ? p.slice(0,40)+"â€¦" : p}
                  </button>
                ))}
              </div>
              <div style={{padding:"14px 24px",borderTop:"1px solid var(--ink5)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"}}>
                <span style={{...m,fontSize:"0.62rem",color:"var(--ink4)"}}>âŒ˜ + Enter to run</span>
                <button
                  onClick={() => generateSimScenario(simInput)}
                  disabled={simLoading||!simInput.trim()}
                  style={{
                    padding:"11px 24px",fontSize:"0.7rem",letterSpacing:"0.12em",textTransform:"uppercase",
                    background: simLoading||!simInput.trim() ? "var(--ink5)" : "var(--ink)",
                    color:      simLoading||!simInput.trim() ? "var(--ink4)" : "var(--cream)",
                    border:"none",cursor: simLoading||!simInput.trim() ? "not-allowed" : "pointer"
                  }}>
                  {simLoading ? "Generating scenariosâ€¦" : "Generate Impact Scenarios â†’"}
                </button>
              </div>
            </div>

            {simError && <div style={{marginBottom:"24px",padding:"16px 20px",background:"#fff0f0",border:"1px solid #f0c0c0",...m,fontSize:"0.8rem",color:"var(--red)"}}>{simError}</div>}

            {simLoading && (
              <div style={{display:"flex",gap:"16px",alignItems:"center",padding:"24px",background:"var(--paper)",border:"1px solid var(--ink5)",marginBottom:"32px"}}>
                <Dots />
                <span style={{...m,fontSize:"0.8rem",color:"var(--ink3)"}}>Generating four outcome stories for your informationâ€¦</span>
              </div>
            )}

            {simScenario && (
              <div ref={simResultRef}>
                {/* Info display */}
                <div style={{background:"var(--paper)",border:"1px solid var(--ink5)",padding:"24px 32px",marginBottom:"32px",borderLeft:"4px solid var(--ink)",position:"relative"}}>
                  <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase",marginBottom:"10px"}}>The Information</div>
                  <p style={{fontFamily:"var(--italic)",fontStyle:"italic",fontSize:"1.05rem",color:"var(--ink)",lineHeight:1.6}}>"{simScenario.info}"</p>
                  <button onClick={() => { setSimScenario(null); setSimInput(""); }} style={{
                    position:"absolute",top:"16px",right:"16px",
                    fontSize:"0.6rem",letterSpacing:"0.1em",textTransform:"uppercase",
                    color:"var(--ink4)",background:"transparent",border:"1px solid var(--ink5)",padding:"5px 10px",cursor:"pointer"
                  }}>Change</button>
                </div>

                {/* Sliders */}
                <div className="three-col" style={{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:"24px",marginBottom:"40px"}}>
                  {[
                    {label:"1. Do You Act On It?",       desc:"Knowing vs. doing",  value:actionLevel,    setter:setActionLevel,    left:"Know it, ignore it", right:"Act on it daily", color:"#3060a8"},
                    {label:"2. How Do You Interpret It?", desc:"Meaning you assign", value:interpretation, setter:setInterpretation, left:"I'm already behind",  right:"I can start now",  color:"#3a7a50"},
                    {label:"3. Is the Timing Right?",     desc:"Life context match", value:timing,         setter:setTiming,         left:"Wrong life stage",    right:"Perfect moment",   color:"#8b3a8b"},
                  ].map((ctrl,i) => (
                    <div key={i} style={{background:"var(--paper)",border:"1px solid var(--ink5)",padding:"24px 20px"}}>
                      <div style={{...s,fontSize:"0.95rem",fontWeight:700,color:"var(--ink)",marginBottom:"4px"}}>{ctrl.label}</div>
                      <div style={{...m,fontSize:"0.65rem",color:"var(--ink4)",letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:"20px"}}>{ctrl.desc}</div>
                      <input type="range" min={0} max={100} value={ctrl.value} onChange={e => ctrl.setter(Number(e.target.value))} style={{accentColor:ctrl.color,marginBottom:"12px"}} />
                      <div style={{display:"flex",justifyContent:"space-between"}}>
                        <span style={{...m,fontSize:"0.6rem",color:"#b84040",maxWidth:"45%",lineHeight:1.4}}>{ctrl.left}</span>
                        <span style={{...m,fontSize:"0.6rem",color:"#3a7a50",maxWidth:"45%",textAlign:"right",lineHeight:1.4}}>{ctrl.right}</span>
                      </div>
                    </div>
                  ))}
                </div>

                {/* Outcome */}
                {outcome && (
                  <div className="two-col-280" style={{display:"grid",gridTemplateColumns:"280px 1fr",border:"2px solid var(--ink)",background:"var(--paper)"}}>
                    <div className="side-border-r" style={{borderRight:"2px solid var(--ink)",padding:"32px 28px",display:"flex",flexDirection:"column",gap:"20px"}}>
                      <div>
                        <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase",marginBottom:"8px"}}>Impact Score</div>
                        <div style={{...s,fontSize:"3.5rem",fontWeight:900,lineHeight:1,color:outcome.color}}>
                          {outcome.impact}<span style={{fontSize:"1.5rem",color:"var(--ink4)"}}>/ 100</span>
                        </div>
                      </div>
                      <div style={{background:"var(--ink5)",borderRadius:"2px",overflow:"hidden",height:"8px"}}>
                        <div style={{height:"100%",width:`${impactWidth}%`,background:outcome.color,transition:"width 0.6s ease",borderRadius:"2px"}} />
                      </div>
                      <div style={{display:"inline-flex",alignItems:"center",gap:"8px",background:`${outcome.color}18`,border:`1px solid ${outcome.color}40`,padding:"8px 12px"}}>
                        <span style={{fontSize:"1.1rem"}}>{outcome.icon}</span>
                        <span style={{...m,fontSize:"0.65rem",letterSpacing:"0.1em",textTransform:"uppercase",color:outcome.color}}>{outcome.label}</span>
                      </div>
                      <div style={{...m,fontSize:"0.65rem",color:"var(--ink4)",lineHeight:1.6}}>
                        The same piece of information.<br/>
                        {impactWidth>70 ? "Applied fully." : impactWidth>30 ? "Partially used." : "Left untouched."}
                      </div>
                    </div>
                    <div style={{padding:"32px 36px"}}>
                      <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase",marginBottom:"16px"}}>What Actually Happens</div>
                      <p style={{fontFamily:"var(--italic)",fontStyle:"italic",fontSize:"1.1rem",color:"var(--ink)",lineHeight:1.8}}>
                        {outcome.text}
                      </p>
                    </div>
                  </div>
                )}
              </div>
            )}

            {/* Three factors */}
            <div className="three-col" style={{display:"grid",gridTemplateColumns:"repeat(3,1fr)",marginTop:"40px",border:"1px solid var(--ink5)"}}>
              {[
                {num:"01",title:"Whether you act on it",  body:"Knowing something changes nothing. Acting on the same knowledge changes everything. The information is identical. The outcome isn't."},
                {num:"02",title:"How you interpret it",   body:"The same failure can motivate one person and permanently stop another. Meaning matters as much as the data itself."},
                {num:"03",title:"Timing and context",     body:"Career strategy means nothing to a child. Emotional boundaries only click after enough painful experiences. The right insight at the right time feels like a switch flipping."},
              ].map((f,i) => (
                <div key={i} className="side-border-r" style={{padding:"28px 24px",borderRight:i<2?"1px solid var(--ink5)":"none",background:"var(--paper)"}}>
                  <div style={{...m,fontSize:"0.65rem",letterSpacing:"0.15em",color:"var(--amber)",textTransform:"uppercase",marginBottom:"10px"}}>{f.num}</div>
                  <div style={{...s,fontSize:"1rem",fontWeight:700,color:"var(--ink)",marginBottom:"10px"}}>{f.title}</div>
                  <p style={{...m,fontSize:"0.8rem",color:"var(--ink3)",lineHeight:1.7}}>{f.body}</p>
                </div>
              ))}
            </div>
          </div>

          {/* â•â• DIVIDER â•â• */}
          <div className="pad-outer" style={{padding:"80px 80px",maxWidth:"1100px",margin:"0 auto",display:"flex",alignItems:"center",gap:"24px",flexWrap:"wrap"}}>
            <div style={{flex:1,height:"1px",background:"var(--ink5)",minWidth:"40px"}} />
            <div style={{fontFamily:"var(--serif)",fontStyle:"italic",fontSize:"1.05rem",color:"var(--ink4)",textAlign:"center"}}>
              Information â†’ Understanding â†’ Decision â†’ <strong style={{color:"var(--amber)",fontStyle:"normal"}}>Action</strong> â†’ Outcome
            </div>
            <div style={{flex:1,height:"1px",background:"var(--ink5)",minWidth:"40px"}} />
          </div>

          {/* â•â• PART 2 â€” A.P.P.L.Y. RUNNER â•â• */}
          <div className="pad-outer" style={{padding:"0 80px 80px",maxWidth:"1100px",margin:"0 auto"}}>

            <div style={{display:"flex",alignItems:"baseline",gap:"16px",marginBottom:"8px"}}>
              <span style={{...m,fontSize:"0.6rem",letterSpacing:"0.25em",color:"var(--amber)",textTransform:"uppercase"}}>Part Two</span>
              <div style={{flex:1,height:"1px",background:"var(--ink5)"}} />
            </div>
            <h2 style={{...s,fontSize:"clamp(32px,5vw,56px)",fontWeight:700,lineHeight:0.95,color:"var(--ink)",marginBottom:"12px"}}>
              AI Runs<br/><em style={{color:"var(--amber)"}}>A.P.P.L.Y.</em><br/>For You
            </h2>
            <p style={{...m,color:"var(--ink3)",fontSize:"0.85rem",marginBottom:"40px",lineHeight:1.7,maxWidth:"520px"}}>
              Paste any note, insight, article highlight, or piece of information. Grok will run the full five-step A.P.P.L.Y. system and generate a complete, ready-to-install action plan.
            </p>

            {/* Note input */}
            <div style={{background:"var(--paper)",border:"2px solid var(--ink)"}}>
              <div style={{padding:"14px 24px",borderBottom:"1px solid var(--ink5)",display:"flex",alignItems:"center",gap:"10px"}}>
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--red)"}} />
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--amber2)"}} />
                <div style={{width:"8px",height:"8px",borderRadius:"50%",background:"var(--green)"}} />
                <span style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase",marginLeft:"8px"}}>Your Note</span>
              </div>
              <textarea
                value={noteInput}
                onChange={e => setNoteInput(e.target.value)}
                placeholder={"Paste any insight here...\n\ne.g. \"The average person checks their phone 96 times a day, interrupting deep work and reducing cognitive capacity by up to 40%.\"\n\nor a book highlight, article excerpt, advice you received, etc."}
                style={{width:"100%",minHeight:"160px",padding:"24px",background:"transparent",border:"none",outline:"none",resize:"vertical",color:"var(--ink)"}}
              />
              <div style={{padding:"14px 24px",borderTop:"1px solid var(--ink5)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"}}>
                <span style={{...m,fontSize:"0.62rem",color:"var(--ink4)"}}>
                  {noteInput.trim().split(/\s+/).filter(Boolean).length} words
                </span>
                <button
                  onClick={runApply}
                  disabled={loading||!noteInput.trim()}
                  style={{
                    padding:"12px 28px",fontSize:"0.75rem",letterSpacing:"0.12em",textTransform:"uppercase",
                    background: loading||!noteInput.trim() ? "var(--ink5)" : "var(--ink)",
                    color:      loading||!noteInput.trim() ? "var(--ink4)" : "var(--cream)",
                    border:"none",cursor: loading||!noteInput.trim() ? "not-allowed" : "pointer"
                  }}>
                  {loading ? "Running A.P.P.L.Y.â€¦" : "Run A.P.P.L.Y. â†’"}
                </button>
              </div>
            </div>

            {loading && (
              <div style={{marginTop:"24px",padding:"24px",background:"var(--paper)",border:"1px solid var(--ink5)",display:"flex",gap:"16px",alignItems:"center"}}>
                <Dots />
                <span style={{...m,fontSize:"0.8rem",color:"var(--ink3)"}}>Analyzing your note through all five stepsâ€¦</span>
              </div>
            )}

            {error && <div style={{marginTop:"24px",padding:"20px 24px",background:"#fff0f0",border:"1px solid #f0c0c0",...m,fontSize:"0.8rem",color:"var(--red)"}}>{error}</div>}

            {/* Result */}
            {aiResult && (
              <div ref={resultRef} style={{marginTop:"40px"}}>

                <div style={{background:"var(--ink)",padding:"28px 32px"}}>
                  <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.25em",color:"var(--amber)",textTransform:"uppercase",marginBottom:"10px"}}>Your Action Plan</div>
                  <p style={{fontFamily:"var(--serif)",fontStyle:"italic",fontSize:"1.2rem",color:"var(--cream)",lineHeight:1.5}}>"{aiResult.summary}"</p>
                </div>

                {[
                  {key:"anchor", render: d => (
                    <div>
                      <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.15em",color:"var(--ink4)",textTransform:"uppercase",marginBottom:"6px"}}>Why It Matters</div>
                      <p style={{...m,fontSize:"0.88rem",color:"var(--ink)",lineHeight:1.7,marginBottom:"14px"}}>{d.why}</p>
                      <div style={{background:`${STEP_COLORS[0]}12`,border:`1px solid ${STEP_COLORS[0]}30`,padding:"10px 16px",display:"inline-block"}}>
                        <span style={{...m,fontSize:"0.7rem",color:STEP_COLORS[0]}}>Applies to: {d.relevance}</span>
                      </div>
                    </div>
                  )},
                  {key:"action", render: d => (
                    <div style={{display:"flex",flexDirection:"column",gap:"16px"}}>
                      <div style={{background:`${STEP_COLORS[1]}10`,border:`2px solid ${STEP_COLORS[1]}`,padding:"20px 24px"}}>
                        <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.15em",color:STEP_COLORS[1],textTransform:"uppercase",marginBottom:"8px"}}>âœ“ Do This</div>
                        <p style={{...s,fontWeight:700,fontSize:"1.05rem",color:"var(--ink)",lineHeight:1.5}}>{d.behavior}</p>
                      </div>
                      <div style={{background:"#fff5f5",border:"1px solid #f0c0c0",padding:"16px 20px"}}>
                        <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.15em",color:"var(--red)",textTransform:"uppercase",marginBottom:"6px"}}>âœ— Not This (too big)</div>
                        <p style={{...m,fontSize:"0.82rem",color:"var(--ink3)"}}>{d.not_this}</p>
                      </div>
                    </div>
                  )},
                  {key:"place", render: d => (
                    <div style={{display:"flex",flexDirection:"column",gap:"16px"}}>
                      <div style={{fontFamily:"var(--serif)",fontSize:"1.15rem",color:"var(--ink)",background:`${STEP_COLORS[2]}0d`,border:`1px solid ${STEP_COLORS[2]}30`,padding:"20px 24px",lineHeight:1.6}}>
                        <em style={{color:"var(--ink4)"}}>Formula:</em> "{d.formula}"
                      </div>
                      <p style={{...m,fontSize:"0.82rem",color:"var(--ink3)",lineHeight:1.6}}>{d.context}</p>
                    </div>
                  )},
                  {key:"loop", render: d => (
                    <div style={{display:"flex",flexDirection:"column",gap:"16px"}}>
                      <p style={{...m,fontSize:"0.88rem",color:"var(--ink)",lineHeight:1.7}}><strong>Track for {d.duration}:</strong> {d.tracking}</p>
                      <div style={{display:"flex",flexDirection:"column",gap:"8px"}}>
                        {d.checkboxes.map((cb,i) => (
                          <div key={i} style={{display:"flex",alignItems:"center",gap:"12px"}}>
                            <div style={{width:"16px",height:"16px",border:`2px solid ${STEP_COLORS[3]}`,flexShrink:0}} />
                            <span style={{...m,fontSize:"0.82rem",color:"var(--ink3)"}}>{cb}</span>
                          </div>
                        ))}
                      </div>
                    </div>
                  )},
                  {key:"yield", render: d => (
                    <div style={{display:"flex",flexDirection:"column",gap:"16px"}}>
                      <div className="three-col" style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"}}>
                        <div style={{background:"#f0fff4",border:"1px solid #a0d8b0",padding:"20px"}}>
                          <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.15em",color:"var(--green)",textTransform:"uppercase",marginBottom:"8px"}}>YES â†’ Promote</div>
                          <p style={{...m,fontSize:"0.82rem",color:"var(--ink)",lineHeight:1.6}}>{d.yes_signal}</p>
                        </div>
                        <div style={{background:"#fff8f0",border:"1px solid #e0c090",padding:"20px"}}>
                          <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.15em",color:"var(--amber)",textTransform:"uppercase",marginBottom:"8px"}}>NO â†’ Adjust</div>
                          <p style={{...m,fontSize:"0.82rem",color:"var(--ink)",lineHeight:1.6}}>{d.no_signal}</p>
                        </div>
                      </div>
                      <div style={{...m,fontSize:"0.8rem",color:"var(--ink3)",lineHeight:1.6,borderTop:"1px solid var(--ink5)",paddingTop:"16px"}}>
                        <strong>Decision rule:</strong> {d.decision}
                      </div>
                    </div>
                  )},
                ].map((step,i) => (
                  <div key={step.key} className="two-col-180" style={{display:"grid",gridTemplateColumns:"180px 1fr",border:"1px solid var(--ink5)",borderTop:"none",background:"var(--paper)"}}>
                    <div className="side-border-r" style={{borderRight:"1px solid var(--ink5)",padding:"28px 24px",background:`${STEP_COLORS[i]}08`,display:"flex",flexDirection:"column",gap:"8px"}}>
                      <div style={{fontSize:"2.5rem",lineHeight:1}}>{STEP_ICONS[i]}</div>
                      <div style={{...m,fontSize:"0.6rem",letterSpacing:"0.2em",color:STEP_COLORS[i],textTransform:"uppercase"}}>{STEP_LABELS[i]}</div>
                      <div style={{...s,fontSize:"0.9rem",color:"var(--ink)",fontWeight:700,lineHeight:1.3}}>{STEP_FULL[i]}</div>
                    </div>
                    <div style={{padding:"28px 32px"}}>
                      {step.render(aiResult[step.key])}
                    </div>
                  </div>
                ))}

                <div style={{display:"flex",gap:"12px",marginTop:"24px",flexWrap:"wrap"}}>
                  <button onClick={copyPlan} style={{
                    padding:"12px 24px",fontSize:"0.7rem",letterSpacing:"0.12em",textTransform:"uppercase",
                    background: copied ? "var(--green)" : "var(--ink)",
                    color:"var(--cream)",border:"none",cursor:"pointer"
                  }}>{copied ? "Copied! âœ“" : "Copy Plan"}</button>
                  <button onClick={() => { setAiResult(null); setNoteInput(""); }} style={{
                    padding:"12px 24px",fontSize:"0.7rem",letterSpacing:"0.12em",textTransform:"uppercase",
                    background:"transparent",color:"var(--ink3)",border:"1px solid var(--ink5)",cursor:"pointer"
                  }}>Run Another Note</button>
                </div>
              </div>
            )}
          </div>

          {/* â•â• FOOTER â•â• */}
          <div className="pad-outer" style={{borderTop:"2px solid var(--ink5)",padding:"32px 80px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--paper)",flexWrap:"wrap",gap:"12px"}}>
            <div style={{fontFamily:"var(--serif)",fontStyle:"italic",fontSize:"1rem",color:"var(--ink3)"}}>
              Notes are not knowledge. Applied notes are leverage.
            </div>
            <div style={{...m,fontSize:"0.65rem",letterSpacing:"0.2em",color:"var(--ink4)",textTransform:"uppercase"}}>
              A.P.P.L.Y. System
            </div>
          </div>

        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
